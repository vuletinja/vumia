<script>import { HierarchicalObject } from '@threlte/core';
import { usePortalContext } from '../usePortalContext';
export let id = 'default';
export let object = undefined;
const { getPortal } = usePortalContext();
const portal = getPortal(id);
$: portalTarget = object ?? $portal;
</script>

{#if portalTarget}
  <HierarchicalObject
    onChildMount={(child) => {
      portalTarget?.add(child)
    }}
    onChildDestroy={(child) => {
      portalTarget?.remove(child)
    }}
  >
    <slot />
  </HierarchicalObject>
{/if}
