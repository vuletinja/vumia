import { injectPlugin } from '@threlte/core';
import { onMount, tick } from 'svelte';
const isObject3D = (object) => object.isObject3D;
export const injectAlignPlugin = (align) => {
    injectPlugin('align-plugin', ({ ref }) => {
        if (!isObject3D(ref))
            return;
        onMount(() => {
            align();
            return align;
        });
        const waitForTickAndAlign = async () => {
            await tick();
            align();
        };
        return {
            onRefChange() {
                waitForTickAndAlign();
            }
        };
    });
};
